function $$BANNER(e){function s(){var e={},t=window.location.search.substring(1).split("&");if(!(t.length<=0))for(var n=0;n<t.length;n++){var o=t[n].split("="),i=decodeURIComponent(o[1]);""!=i&&""!=o[0]&&(e[o[0]]=i)}return e}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var i=function(e){return String.fromCodePoint(e)},c={Error:"Something went wrong!",Valid:i(128994)+" "+i(128077),NonValid:i(128308)+" "+i(128128),Stylesheet:{Valid:"font-size: 12px; color: green; font-weight: bold",Fail:"font-size: 12px; color: red; font-weight: bold",Warn:"font-size: 11px; color: gold"}},{iDocuments:e,iAnimation:a,iHandler:l,iConfigs:t,iURIParam:r,iVideoConfigs:d,iHTML:h}=e,{NodeControllers:u,iCode:n}=o={isHttp:"http:"===window.location.protocol||"https:"===window.location.protocol,hasInitial:!0,iCode:592965,GSAP:{Tween:null,Timeline:null,VERSION:"2",isActive:!1,lagSmooth:!0,timers:0,V1:["https://s0.2mdn.net/ads/studio/cached_libs/tweenmax_1.20.0_d360d9a082ccc13b1a1a9b153f86b378_min.js"],V2:["https://s0.2mdn.net/ads/studio/cached_libs/tweenmax_2.0.1_min.js"],V3:["https://s0.2mdn.net/ads/studio/cached_libs/gsap_3.5.1_min.js"]},NodeControllers:{selector:function(e){return window.document.querySelector.bind(document)(e)},selectorAll:function(e){return window.document.querySelectorAll.bind(document)(e)},createElement:function(e){return window.document.createElement.bind(document)(e)},removeElement:function(e){return e.remove()},deleteItem:function(e,t){return-1<(t=e.indexOf(t))&&e.splice(t,1),e},removeAllChildren:function(e){for(;e&&e.nodeType&&e.lastChild;)e.removeChild(e.lastChild)},getElementAttribute:function(e,t){return e.getAttribute(t)},isEmpty:function(e){return 0===Object.keys(e).length}},Mouse:{Click:"ontouchstart"in document.documentElement?"touchstart":"click",Move:"ontouchstart"in document.documentElement?"touchmove":"mousemove",Drag:"ontouchstart"in document.documentElement?"touchend":"mouseup"}},o=t&&u.isEmpty(t)?o:Object.assign({},o,t),f=!!s().debug,m=!s().license;function g(e){var{isHttp:t,hasInitial:n}=e,{registered:o,updated:i}=e.Banner,a="undefined"!=typeof $$ThirdParty?$$ThirdParty():"IAB";console.warn("%c\nWELCOME TO PTC's FACTORY PRODUCTION !\n-----------------------------------\nBanner: "+e.Banner.width+"x"+e.Banner.height+"\nVerion: 2.0.0 \nHTTP Protocol: "+t+"\nInitial Load: "+n+"\nDebug: "+f+"\nLicense: "+(o===i)+"\nThird Party: "+a+"\n"+o/2023+"•"+i/2023+"•"+i+"\n-----------------------------------\n","font-size: 11px; color: white")}function p(e,t,n){var t=t.Doms.eClickTag,o="undefined"!=typeof $$ThirdParty;"a"===t.tagName.toLowerCase()&&"object"==typeof window.clickTag&&e.preventDefault(),n&&window.open(n),o&&("undefined"==typeof EB&&"undefined"==typeof adkit||(EB.clickthrough(),f&&console.log("EB - Click Through!")),"undefined"!=typeof Enabler&&(Enabler.exit("Background Exit!"),f&&console.log("Enabler - Background Exit!")),"undefined"!=typeof myFT&&f&&console.log("FlashTalking - Click Through!"),"undefined"!=typeof screenad&&(screenad.click(),f&&console.log("Weborama - Click Through!")))}(t=window).preloadImages=function(e,t){window.IMAGES_CACHE={};var n,o,i=e.length;if(0===e.length)t&&"function"==typeof t&&t();else for(;n=e.pop();)(o=new Image).onload=function(e){f&&console.log("...",e),window.IMAGES_CACHE[e]=this,0==--i&&t&&"function"==typeof t&&t()}.bind(o,n),o.src=n},t.loadScripts=function(e,t){var n,o,i=e.length;if(0===e.length)t&&"function"==typeof t&&t();else for(;n=e.pop();)(o=document.createElement("script")).defer=!0,o.onload=function(){0==--i&&t&&"function"==typeof t&&t()},o.src=n,document.getElementsByTagName("head")[0].appendChild(o)};function y(e,t){var n=e.Doms.lazyItems,{isActive:o,lagSmooth:i}=e.GSAP,a=[];n&&0<n.length&&n.forEach(function(e){a.push(e.src)});try{o?M(e,function(){e.GSAP.Tween=window.gsap||window.TweenMax||window.TweenLite,e.GSAP.Timeline=window.gsap?gsap.timeline():new(window.TweenMax?TimelineMax:TimelineLite),i&&e.GSAP.Tween.ticker.lagSmoothing(0),preloadImages(a,function(){t&&"function"==typeof t&&t()})}):preloadImages(a,function(){t&&"function"==typeof t&&t()}),"undefined"!=typeof $$VIDEO&&"function"==typeof $$VIDEO&&(d?$$VIDEO(e,e.Doms.Media,d):$$VIDEO(e,e.Doms.Media))}catch(e){}}function w(e,t){var{}=e,{eAds:n,eBanner:o}=e.Doms;n&&o&&(n.dataset.load="1",o.style.opacity="1",o.style.visibility="visible"),I(e,function(){l&&"function"==typeof l?(l(e),f&&console.log(i(128077)+" %ciHandler function is ready !",c.Stylesheet.Warn)):P(e,"iHandler is "+c.NonValid,!1),a&&"function"==typeof a?(a(e),f&&console.log(i(128077)+" %ciAnimation function is ready !",c.Stylesheet.Warn)):P(e,"iAnimation is "+c.NonValid,!1)}),f&&console.log("%c"+c.Valid,c.Stylesheet.Valid),t&&"function"==typeof t&&t()}var I=function(t,e){var n=t.Mouse,o=t.Doms.eClickTag,i=s()[r],a="undefined"!=typeof $$ThirdParty;(o&&i||o&&a)&&o.addEventListener(n.Click,function(e){a?p(e,t):p(e,t,i)},!1),e&&"function"==typeof e&&e()},P=function(e,t,n){(e=e.Doms.eAds)&&(n&&e.classList.add("has-error"),f&&console.log("%c"+(t||c.Error),c.Stylesheet.Fail))},M=function(e,t){return e=e.GSAP["V"+e.GSAP.VERSION],loadScripts(e,function(){t&&"function"==typeof t&&t()})},v=o;try{v.Banner={};function A(e){var t,n,{isHttp:o,hasInitial:i}=v,{eAds:a,eBanner:s}=v.Doms;v.Banner.width=s.innerWidth||s.clientWidth||s.offsetWidth,v.Banner.height=s.innerHeight||s.clientHeight||s.offsetHeight,i&&h&&(s.innerHTML=h,v.Doms.lazyItems=u.selectorAll(".js-lazy")),0<s.children.length?o&&m?(n=function(){var{registered:e,updated:t}=v.Banner;"undefined"!=typeof $$ThirdParty&&$$ThirdParty(),f&&(a.dataset.id=t,g(v)),e===t?y(v,function(){w(v)}):P(v,c.NonValid,!0)},i=(t=v).Doms.lazyItems,s=Array.prototype.map.call(i,async function(e){t.Banner.updated=0,await fetch(e.src).then(function(e){return e.blob()}).then(function(e){e=new File([e],name,{type:e.type});e&&(t.Banner.updated+=e.size)})}),i&&0<i.length?Promise.all(s).then(function(){n()}):y(t,function(){w(t)})):y(v,function(){f&&g(v),w(v)}):P(v,"Elements of Ads isn't empty!",!0)}var S=v,T=S.NodeControllers,E={eBody:T.selector("body"),eAds:T.selector(".js-ap-ad"),eBanner:T.selector(".js-banner"),eClickTag:T.selector(".js-clickTag"),lazyItems:T.selectorAll(".js-lazy"),scriptCustom:T.selector("#ads-custom")};S.Doms=e&&T.isEmpty(e)?E:Object.assign({},E,e),S.Banner.registered=parseInt(n),A(S.Doms)}catch(e){P(v,c.NonValid,!0)}}var APWatch=function(y,w){document.addEventListener("load",function(){var e,u=y.getContext("2d"),f={},m=[];(new Date).getSeconds(),Math.PI;function t(e,t,n){var o=new XMLHttpRequest;e&&(o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText)[n];t&&"function"==typeof t&&t(e)}else if(404==this.status)return new Date},o.withCredentials=!1,o.open("GET",e,!0),o.send())}function n(){u.clearRect(0,0,y.width,y.height);var e=u,t=w.clock.introTime,n=new Date,o=n.getHours(),i=n.getMinutes(),a=n.getSeconds(),s=n.getMilliseconds(),c=(n.getDate(),t.getHours()),l=t.getMinutes(),r=t.getSeconds(),d=t.getMilliseconds(),h=t.getDate();console.log("#",n,t),console.log("H",o,c),console.log("M",i,l),console.log("S",a,r),console.log("MS",s,d),dayRotate=Math.PI/180*(h-1)*(360/31)-.0175,c%=12,c=w.clock.hasNeedleSmooth?c*Math.PI/6+l*Math.PI/360+(r+d/1e3)*Math.PI/21600:c*Math.PI/6+l*Math.PI/360+r*Math.PI/21600,l=w.clock.hasNeedleSmooth?l*Math.PI/30+(r+d/1e3)*Math.PI/1800:l*Math.PI/30+r*Math.PI/1800,r=a*r*Math.PI/30,w.clock.hasWatch&&p(y,e,m,0,0),w.clock.hasNeedleSecond&&g(f.imgsecondes,e,r,w.needles)}function o(e){n=new Date,t=w.clock.timeZone;var t,n="string"==typeof n?new Date(new Date(n).toLocaleString("en-US",{timeZone:t})):new Date(n.toLocaleString("en-US",{timeZone:t}));u.clearRect(0,0,y.width,y.height),w.clock.hasAPI?i(u,new Date(e)):i(u,new Date(n))}function i(e,t){0;var n,o=new Date,i=t.getHours(),a=t.getMinutes(),s=o.getSeconds(),o=(0!==t.getMilliseconds()?t:o).getMilliseconds(),t=t.getDate(),c=Math.PI/180*(t-1)*(360/31)-.0175;i%=12,i=w.clock.hasNeedleSmooth?i*Math.PI/6+a*Math.PI/360+(s+o/1e3)*Math.PI/21600:i*Math.PI/6+a*Math.PI/360+s*Math.PI/21600,a=w.clock.hasNeedleSmooth?a*Math.PI/30+(s+o/1e3)*Math.PI/1800:a*Math.PI/30+s*Math.PI/1800,s=w.clock.hasNeedleSmooth?(s+o/1e3)*(Math.PI/30):s*Math.PI/30,w.clock.hasImageDate&&g(f.imgdate,e,c,w.clock.dataImage),w.clock.hasWatch&&p(y,e,m,0,0),w.clock.hasTextDate&&(o=e,c=t,t=w.clock.date,n=w.maxWidth,o.textAlign="center",o.font=t.fontSize+" "+t.fontName,o.fillStyle=t.color,o.fillText(c,t.x,t.y,n)),w.clock.hasNeedleHour&&g(f.imgheures,e,i,w.needles),w.clock.hasNeedleMinute&&g(f.imgminutes,e,a,w.needles),w.clock.hasNeedleSecond&&g(f.imgsecondes,e,s,w.needles)}function g(e,t,n,o){t.globalAlpha=1,t.imageSmoothingQuality="high",t.save(),t.setTransform(1,0,0,1,o.x,o.y),t.rotate(n),t.translate(-o.width/2,-o.width/2),t.drawImage(e,0,0,o.width,o.width),t.restore()}function p(t,n,e,o,i){e&&0<e.length&&e.forEach(function(e){e&&(n.save(),n.setTransform(1,0,0,1,o,i),n.translate(0,0),n.rotate(e.angle*Math.PI/180),n.drawImage(e,0,0,t.width,t.height),n.restore())})}return e=function(){w.clock.hasIntro,w.clock.hasNeedleSmooth?setInterval(function(){w.clock.hasAPI?t(w.clock.endpoint,o,"utc_datetime"):(w.clock.hasIntro?n:o)()},10):setInterval(function(){w.clock.hasAPI?t(w.clock.endpoint,o,"utc_datetime"):(w.clock.hasIntro?n:o)()},1e3)},w.assets&&0<w.assets.length&&w.assets.forEach(function(e,t){f["img"+e.replace(window.themeUri+"/ap-watch/", "").substr(0,e.replace(window.themeUri+"/ap-watch/", "").indexOf("."))]=new Image,f["img"+e.replace(window.themeUri+"/ap-watch/", "").substr(0,e.replace(window.themeUri+"/ap-watch/", "").indexOf("."))].src=e,3<t&&m.push(f["img"+e.replace(window.themeUri+"/ap-watch/", "").substr(0,e.replace(window.themeUri+"/ap-watch/", "").indexOf("."))])}),document.addEventListener("visibilitychange",e=>{document.visibilityState,(new Date).getSeconds()*Math.PI/30}),void(e&&"function"==typeof e&&(e(),w.clock.hasIntro&&n()))}())},APWatchHTML=`<div id="banner" class="banner">\n        <img src="${window.themeUri}/ap-watch/bg.jpg" class="img_full isDesktop js-lazy">\n        <img src="${window.themeUri}/ap-watch/bg_m.jpg" class="img_full isMobile js-lazy">\n        <img src="${window.themeUri}/ap-watch/logo.png" class="img_full isDesktop js-lazy">\n        <img src="${window.themeUri}/ap-watch/logo_m.png" class="img_full isMobile js-lazy">\n        <canvas id="canvas" data-maxWidth="736" width="736" height="1240"></canvas>\n        <p class="text isDesktop">VIBREZ AU RYTHME DE MONTREUX</p>\n        <p class="cta">EN SAVOIR PLUS</p>\n    </div>\n    <div class="border js-border full"></div>\n    <a href="javascript:void(window.open(window.clickTag));" id="clickTag" class="clickTag js-clickTag full"></a>`,APWatchAnimation=function(e){var t=document.getElementById("canvas"),n=parseInt(t.getAttribute("data-maxWidth")),n={maxWidth:t.width<=n?t.width:n,clock:{timeZone:"Europe/Paris",name:"omega",introTime:new Date("Sun Dec 1 2023 13:49:40"),endpoint:"https://worldtimeapi.org/api/timezone/Europe/Paris",date:{x:"465",y:"557",fontSize:"50px",fontName:"Arial, Tahoma, sans-serif",color:"#C0C0C0"},dataImage:{width:"436",x:"341.5",y:"541"},hasIntro:!1,hasWatch:!0,hasTextDate:!1,hasImageDate:!1,hasNeedleSecond:!0,hasNeedleMinute:!0,hasNeedleHour:!0,hasNeedleSmooth:!0,hasAPI:!1},needles:{width:"700",x:"330.5",y:"550.51"},assets:[`${window.themeUri}/ap-watch/heures.png`,`${window.themeUri}/ap-watch/minutes.png`,`${window.themeUri}/ap-watch/secondes.png`,"",`${window.themeUri}/ap-watch/watch.png`]};APWatch&&APWatch(t,n)},initAPwatch=function(){var e=document.querySelector(".js-banner");e&&"1"!==e.dataset.load&&$$BANNER({iAnimation:void 0!==APWatchAnimation?APWatchAnimation:void 0,iHTML:void 0!==APWatchHTML?APWatchHTML:void 0})},destroyAPwatch=function(){var e=document.querySelector(".js-banner");e&&(e.dataset.load="0",e.setAttribute("style",""),e.innerHTML="")};
